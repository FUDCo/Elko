<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_65) on Sat Apr 16 15:03:40 PDT 2016 -->
<TITLE>
Cap (Elko Server Framework)
</TITLE>

<META NAME="date" CONTENT="2016-04-16">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Cap (Elko Server Framework)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../org/elkoserver/server/context/caps/ContextKeyCap.html" title="class in org.elkoserver.server.context.caps"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/elkoserver/server/context/caps/Cap.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Cap.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.elkoserver.server.context.caps</FONT>
<BR>
Class Cap</H2>
<PRE>
<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../../../org/elkoserver/server/context/Mod.html" title="class in org.elkoserver.server.context">org.elkoserver.server.context.Mod</A>
      <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><B>org.elkoserver.server.context.caps.Cap</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Cloneable.html?is-external=true" title="class or interface in java.lang">Cloneable</A>, <A HREF="../../../../../org/elkoserver/foundation/json/DispatchTarget.html" title="interface in org.elkoserver.foundation.json">DispatchTarget</A>, <A HREF="../../../../../org/elkoserver/json/Encodable.html" title="interface in org.elkoserver.json">Encodable</A>, <A HREF="../../../../../org/elkoserver/server/context/ObjectCompletionWatcher.html" title="interface in org.elkoserver.server.context">ObjectCompletionWatcher</A></DD>
</DL>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../../../org/elkoserver/server/context/caps/ContextKeyCap.html" title="class in org.elkoserver.server.context.caps">ContextKeyCap</A>, <A HREF="../../../../../org/elkoserver/server/context/caps/Definer.html" title="class in org.elkoserver.server.context.caps">Definer</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public abstract class <B>Cap</B><DT>extends <A HREF="../../../../../org/elkoserver/server/context/Mod.html" title="class in org.elkoserver.server.context">Mod</A><DT>implements <A HREF="../../../../../org/elkoserver/server/context/ObjectCompletionWatcher.html" title="interface in org.elkoserver.server.context">ObjectCompletionWatcher</A></DL>
</PRE>

<P>
Base class for implementing capability mods that grant access to privileged
 operations.
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../org/elkoserver/server/context/caps/Cap.html#Cap(org.elkoserver.json.JSONObject)">Cap</A></B>(<A HREF="../../../../../org/elkoserver/json/JSONObject.html" title="class in org.elkoserver.json">JSONObject</A>&nbsp;desc)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JSON-driven constructor.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/elkoserver/server/context/caps/Cap.html#delete(org.elkoserver.server.context.User)">delete</A></B>(<A HREF="../../../../../org/elkoserver/server/context/User.html" title="class in org.elkoserver.server.context">User</A>&nbsp;from)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Handle a 'delete' message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/elkoserver/server/context/caps/Cap.html#encodeDefaultParameters(org.elkoserver.json.JSONLiteral)">encodeDefaultParameters</A></B>(<A HREF="../../../../../org/elkoserver/json/JSONLiteral.html" title="class in org.elkoserver.json">JSONLiteral</A>&nbsp;lit)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Encode the basic capability parameters as part of encoding this
 capability mod.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/elkoserver/server/context/caps/Cap.html#ensureValid(org.elkoserver.server.context.User)">ensureValid</A></B>(<A HREF="../../../../../org/elkoserver/server/context/User.html" title="class in org.elkoserver.server.context">User</A>&nbsp;from)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Guard function to guarantee that an operation being attempted by a user
 is being applied to a capability that is actually available to that
 user.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/elkoserver/server/context/caps/Cap.html#isExpired()">isExpired</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Test if this capability has expired.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/elkoserver/server/context/caps/Cap.html#objectIsComplete()">objectIsComplete</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mark the item as visible only to its holder.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/elkoserver/server/context/caps/Cap.html#setlabel(org.elkoserver.server.context.User, java.lang.String)">setlabel</A></B>(<A HREF="../../../../../org/elkoserver/server/context/User.html" title="class in org.elkoserver.server.context">User</A>&nbsp;from,
         <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;label)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Handle a 'setlabel' message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/elkoserver/server/context/caps/Cap.html#spawn(org.elkoserver.server.context.User, org.elkoserver.foundation.json.OptString, org.elkoserver.foundation.json.OptBoolean, org.elkoserver.foundation.json.OptBoolean, org.elkoserver.foundation.json.OptInteger, org.elkoserver.foundation.json.OptInteger)">spawn</A></B>(<A HREF="../../../../../org/elkoserver/server/context/User.html" title="class in org.elkoserver.server.context">User</A>&nbsp;from,
      <A HREF="../../../../../org/elkoserver/foundation/json/OptString.html" title="class in org.elkoserver.foundation.json">OptString</A>&nbsp;dest,
      <A HREF="../../../../../org/elkoserver/foundation/json/OptBoolean.html" title="class in org.elkoserver.foundation.json">OptBoolean</A>&nbsp;transferrable,
      <A HREF="../../../../../org/elkoserver/foundation/json/OptBoolean.html" title="class in org.elkoserver.foundation.json">OptBoolean</A>&nbsp;deleteable,
      <A HREF="../../../../../org/elkoserver/foundation/json/OptInteger.html" title="class in org.elkoserver.foundation.json">OptInteger</A>&nbsp;duration,
      <A HREF="../../../../../org/elkoserver/foundation/json/OptInteger.html" title="class in org.elkoserver.foundation.json">OptInteger</A>&nbsp;expiration)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Handle a 'spawn' message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/elkoserver/server/context/caps/Cap.html#transfer(org.elkoserver.server.context.User, java.lang.String)">transfer</A></B>(<A HREF="../../../../../org/elkoserver/server/context/User.html" title="class in org.elkoserver.server.context">User</A>&nbsp;from,
         <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;destRef)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Handle a 'transfer' message.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.elkoserver.server.context.Mod"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.elkoserver.server.context.<A HREF="../../../../../org/elkoserver/server/context/Mod.html" title="class in org.elkoserver.server.context">Mod</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../../org/elkoserver/server/context/Mod.html#attachTo(org.elkoserver.server.context.BasicObject)">attachTo</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#clone()">clone</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#context()">context</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#ensureHolding(org.elkoserver.server.context.User)">ensureHolding</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#ensureInContext(org.elkoserver.server.context.User)">ensureInContext</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#ensureReachable(org.elkoserver.server.context.User)">ensureReachable</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#ensureSameContext(org.elkoserver.server.context.User)">ensureSameContext</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#ensureSameUser(org.elkoserver.server.context.User)">ensureSameUser</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#holder()">holder</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#isEphemeral()">isEphemeral</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#markAsChanged()">markAsChanged</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#markAsEphemeral()">markAsEphemeral</A>, <A HREF="../../../../../org/elkoserver/server/context/Mod.html#object()">object</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.elkoserver.json.Encodable"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface org.elkoserver.json.<A HREF="../../../../../org/elkoserver/json/Encodable.html" title="interface in org.elkoserver.json">Encodable</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../../org/elkoserver/json/Encodable.html#encode(org.elkoserver.json.EncodeControl)">encode</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="Cap(org.elkoserver.json.JSONObject)"><!-- --></A><H3>
Cap</H3>
<PRE>
public <B>Cap</B>(<A HREF="../../../../../org/elkoserver/json/JSONObject.html" title="class in org.elkoserver.json">JSONObject</A>&nbsp;desc)
    throws <A HREF="../../../../../org/elkoserver/json/JSONDecodingException.html" title="class in org.elkoserver.json">JSONDecodingException</A></PRE>
<DL>
<DD>JSON-driven constructor.

 Note that there are no JSON parameters declared.  This constructor must
 be called from the subclass and will extract its own parameters from the
 JSON object directly.  It looks for three parameters, two booleans and a
 timestamp:

    transferrable  true (default) if cap is transferrable
    deletable      true (default) if cap is deletable
    expiration     time after which cap no longer operates (default
                   value is 0, i.e., cap is permanent), expressed as
                   milliseconds past the epoch, exactly as returned by
                   <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/System.html?is-external=true#currentTimeMillis()" title="class or interface in java.lang"><CODE>System.currentTimeMillis()</CODE></A>.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>desc</CODE> - The parsed JSON object describing this capability mod.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/elkoserver/json/JSONDecodingException.html" title="class in org.elkoserver.json">JSONDecodingException</A></CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="objectIsComplete()"><!-- --></A><H3>
objectIsComplete</H3>
<PRE>
public final void <B>objectIsComplete</B>()</PRE>
<DL>
<DD>Mark the item as visible only to its holder.

 <p>Application code should not call this method.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../org/elkoserver/server/context/ObjectCompletionWatcher.html#objectIsComplete()">objectIsComplete</A></CODE> in interface <CODE><A HREF="../../../../../org/elkoserver/server/context/ObjectCompletionWatcher.html" title="interface in org.elkoserver.server.context">ObjectCompletionWatcher</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="encodeDefaultParameters(org.elkoserver.json.JSONLiteral)"><!-- --></A><H3>
encodeDefaultParameters</H3>
<PRE>
protected final void <B>encodeDefaultParameters</B>(<A HREF="../../../../../org/elkoserver/json/JSONLiteral.html" title="class in org.elkoserver.json">JSONLiteral</A>&nbsp;lit)</PRE>
<DL>
<DD>Encode the basic capability parameters as part of encoding this
 capability mod.  This method must be called by the encode() method of
 each subclass.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>lit</CODE> - The JSONLiteral into which this capability mod is being
    encoded.</DL>
</DD>
</DL>
<HR>

<A NAME="ensureValid(org.elkoserver.server.context.User)"><!-- --></A><H3>
ensureValid</H3>
<PRE>
public final void <B>ensureValid</B>(<A HREF="../../../../../org/elkoserver/server/context/User.html" title="class in org.elkoserver.server.context">User</A>&nbsp;from)
                       throws <A HREF="../../../../../org/elkoserver/foundation/json/MessageHandlerException.html" title="class in org.elkoserver.foundation.json">MessageHandlerException</A></PRE>
<DL>
<DD>Guard function to guarantee that an operation being attempted by a user
 is being applied to a capability that is actually available to that
 user.  To be available, the capability must be attached to an object
 that is reachable by the user and it must not be expired.  If this
 capability is not available, this method with throw a <A HREF="../../../../../org/elkoserver/foundation/json/MessageHandlerException.html" title="class in org.elkoserver.foundation.json"><CODE>MessageHandlerException</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/elkoserver/foundation/json/MessageHandlerException.html" title="class in org.elkoserver.foundation.json">MessageHandlerException</A></CODE> - if the test fails.</DL>
</DD>
</DL>
<HR>

<A NAME="isExpired()"><!-- --></A><H3>
isExpired</H3>
<PRE>
public final boolean <B>isExpired</B>()</PRE>
<DL>
<DD>Test if this capability has expired.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>true if this capability has expired, false if it is still OK to
    use.</DL>
</DD>
</DL>
<HR>

<A NAME="delete(org.elkoserver.server.context.User)"><!-- --></A><H3>
delete</H3>
<PRE>
<FONT SIZE="-1"><A HREF="../../../../../org/elkoserver/foundation/json/JSONMethod.html" title="annotation in org.elkoserver.foundation.json">@JSONMethod</A>
</FONT>public final void <B>delete</B>(<A HREF="../../../../../org/elkoserver/server/context/User.html" title="class in org.elkoserver.server.context">User</A>&nbsp;from)
                  throws <A HREF="../../../../../org/elkoserver/foundation/json/MessageHandlerException.html" title="class in org.elkoserver.foundation.json">MessageHandlerException</A></PRE>
<DL>
<DD>Handle a 'delete' message.  This is a request from a client to delete
 the capability object.

 <p>This request will be rejected if the capability is marked as
 undeletable and is not expired.<p>

 <u>recv</u>: <tt> { to:<i>REF</i>, op:"delete" } </tt><br>
 <u>send</u>: <tt> { to:<i>REF</i>, op:"delete" } </tt>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>from</CODE> - The user who sent the message.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/elkoserver/foundation/json/MessageHandlerException.html" title="class in org.elkoserver.foundation.json">MessageHandlerException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setlabel(org.elkoserver.server.context.User, java.lang.String)"><!-- --></A><H3>
setlabel</H3>
<PRE>
<FONT SIZE="-1"><A HREF="../../../../../org/elkoserver/foundation/json/JSONMethod.html" title="annotation in org.elkoserver.foundation.json">@JSONMethod</A>(<A HREF="../../../../../org/elkoserver/foundation/json/JSONMethod.html#value()">value</A>="label")
</FONT>public void <B>setlabel</B>(<A HREF="../../../../../org/elkoserver/server/context/User.html" title="class in org.elkoserver.server.context">User</A>&nbsp;from,
                                     <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;label)
              throws <A HREF="../../../../../org/elkoserver/foundation/json/MessageHandlerException.html" title="class in org.elkoserver.foundation.json">MessageHandlerException</A></PRE>
<DL>
<DD>Handle a 'setlabel' message.  This is a request from a client to change
 the label of the capability object.<p>

 <u>recv</u>: <tt> { to:<i>REF</i>, op:"setlabel",
                     label:<i>STR</i> } </tt><br>
 <u>send</u>: no reply is sent.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>from</CODE> - The user who sent the message.<DD><CODE>label</CODE> - The new label string.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/elkoserver/foundation/json/MessageHandlerException.html" title="class in org.elkoserver.foundation.json">MessageHandlerException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="transfer(org.elkoserver.server.context.User, java.lang.String)"><!-- --></A><H3>
transfer</H3>
<PRE>
<FONT SIZE="-1"><A HREF="../../../../../org/elkoserver/foundation/json/JSONMethod.html" title="annotation in org.elkoserver.foundation.json">@JSONMethod</A>(<A HREF="../../../../../org/elkoserver/foundation/json/JSONMethod.html#value()">value</A>="dest")
</FONT>public final void <B>transfer</B>(<A HREF="../../../../../org/elkoserver/server/context/User.html" title="class in org.elkoserver.server.context">User</A>&nbsp;from,
                                           <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;destRef)
                    throws <A HREF="../../../../../org/elkoserver/foundation/json/MessageHandlerException.html" title="class in org.elkoserver.foundation.json">MessageHandlerException</A></PRE>
<DL>
<DD>Handle a 'transfer' message.  This is a request from a client to pass
 possession of the capability object to somebody else.

 <p>This request will be rejected if the capability is marked as
 untransferrable.  Yes, this is unenforceable due to the possibility of
 proxying, but marketing solipsism must be served.<p>

 <u>recv</u>: <tt> { to:<i>REF</i>, op:"transfer", dest:<i>DESTREF</i> } </tt><br>
 <u>send</u>: <tt> { to:<i>REF</i>, op:"delete" } </tt><br>
 <u>send</u>: <tt> { to:<i>DESTREF</i>, op:"make", ... } </tt>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>from</CODE> - The user who sent the message.<DD><CODE>destRef</CODE> - Reference to user or context that is to receive the
    capability.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/elkoserver/foundation/json/MessageHandlerException.html" title="class in org.elkoserver.foundation.json">MessageHandlerException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="spawn(org.elkoserver.server.context.User, org.elkoserver.foundation.json.OptString, org.elkoserver.foundation.json.OptBoolean, org.elkoserver.foundation.json.OptBoolean, org.elkoserver.foundation.json.OptInteger, org.elkoserver.foundation.json.OptInteger)"><!-- --></A><H3>
spawn</H3>
<PRE>
<FONT SIZE="-1"><A HREF="../../../../../org/elkoserver/foundation/json/JSONMethod.html" title="annotation in org.elkoserver.foundation.json">@JSONMethod</A>(<A HREF="../../../../../org/elkoserver/foundation/json/JSONMethod.html#value()">value</A>={"dest","transferrable","deletable","duration","expiration"})
</FONT>public void <B>spawn</B>(<A HREF="../../../../../org/elkoserver/server/context/User.html" title="class in org.elkoserver.server.context">User</A>&nbsp;from,
                                  <A HREF="../../../../../org/elkoserver/foundation/json/OptString.html" title="class in org.elkoserver.foundation.json">OptString</A>&nbsp;dest,
                                  <A HREF="../../../../../org/elkoserver/foundation/json/OptBoolean.html" title="class in org.elkoserver.foundation.json">OptBoolean</A>&nbsp;transferrable,
                                  <A HREF="../../../../../org/elkoserver/foundation/json/OptBoolean.html" title="class in org.elkoserver.foundation.json">OptBoolean</A>&nbsp;deleteable,
                                  <A HREF="../../../../../org/elkoserver/foundation/json/OptInteger.html" title="class in org.elkoserver.foundation.json">OptInteger</A>&nbsp;duration,
                                  <A HREF="../../../../../org/elkoserver/foundation/json/OptInteger.html" title="class in org.elkoserver.foundation.json">OptInteger</A>&nbsp;expiration)
           throws <A HREF="../../../../../org/elkoserver/foundation/json/MessageHandlerException.html" title="class in org.elkoserver.foundation.json">MessageHandlerException</A></PRE>
<DL>
<DD>Handle a 'spawn' message.  This is a request from a client to create a
 copy of the capability object, with possibly reduced scope of powers.

 <p>This method will reject, as an illegal rights amplification, any
 attempt to spawn a capability that is undeletable when the base
 capability is deletable, transferrable when the base capability is
 untransferrable, or which has a later expiration time than the base
 capability.

 <p>If 'dest' designates a different holder, the operation will also be
 regarded as a transfer and subjected to all the same checks as a call to
 <A HREF="../../../../../org/elkoserver/server/context/caps/Cap.html#transfer(org.elkoserver.server.context.User, java.lang.String)"><CODE>transfer()</CODE></A>.<p>

 <u>recv</u>: <tt> { to:<i>REF</i>, op:"spawn", dest:<i>optDESTREF</i>,
                     transferrable:<i>optBOOL</i>,
                     duration:<i>optLONG</i>,
                     expiration:<i>optLONG</i> } </tt><br>
 <u>send</u>: <tt> { to:<i>DESTREF</i>, op:"make", ... } </tt>
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>from</CODE> - The user who sent the message.<DD><CODE>dest</CODE> - Reference to container into which the new capability is to
    be placed.  If omitted, defaults to the sending user.  If this
    capability is non-transferrable, must refer to the sending user or a
    container contained by the sending user.<DD><CODE>transferrable</CODE> - Flag indicating whether the new capability is to
    be transferrable.  If omitted, defaults to the same value as this
    capability.  It is not permitted to set this parameter to
    true if this capability is not itself transferrable.<DD><CODE>deleteable</CODE> - Flag indicating whether the new capability is to be
    deleteable.  If omitted, defaults to true.  It is not permitted to
    set this parameter to false if this capability is itself deletable.<DD><CODE>duration</CODE> - Expiration time of the new capability, expressed as an
    offset (in milliseconds) from the present.  A value of 0 (the
    default) indicates that the capability is permanent.<DD><CODE>expiration</CODE> - Expiration time of the new capability, expressed as
    an absolute system time (in milliseconds).
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../org/elkoserver/foundation/json/MessageHandlerException.html" title="class in org.elkoserver.foundation.json">MessageHandlerException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../org/elkoserver/server/context/caps/ContextKeyCap.html" title="class in org.elkoserver.server.context.caps"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/elkoserver/server/context/caps/Cap.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Cap.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
